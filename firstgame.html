<!DOCTYPE html>
<html>
<head>
<style>
	#map { width: 400px; height: 250px; float: left; }	
</style>
	

<p> 
	<label for = "location"> Location: </label>
	<div id = "map"></div>
</p>
	
	
	<p>Click below to position yourself! I mean for us to position you! I mean locate! I mean!!</p>
<button onclick = "showPosition()"> CLICKETY </button>

	<script>
		if(navigator.geolocation)
		{
			var timeoutVal = 10 * 1000 * 1000;
			navigator.geolocation.getCurrentPosition(displayPosition, displayError, 
			{ enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 });
		}
		else
		{
			alert('Your browser does not support fucking geolocation');
		}
		
		function displayPosition(position)
		{
			var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
			var options = { zoom: 10, center: pos, mapTypeId: google.maps.MapTYpeId.ROADMAP };
			var map = new google.maps.Map(document.getElementById("map"), options);
			var marker = new google.maps.Marker({ position: pos, map: map, title: "User location" });
			var contentString = "<b>Timestamp: </b>" + parseTimestamp(position.timestamp) + 
			"<br><b> User location: </b> latitude"
			var infowindow = new google.maps.infowindow({ content: contentString });
			google.maps.event.addListener(marker, 'click', function() { infowindow.open(map, marker); });			
		}
		
		function displayError(error)
		{
			var errors == { 1: "Permission denied", 2: "Position unavailable", 3: "Request timeout" };
			alert("Error: " + errors[error.code]);
		}
		
		function parseTimestamp(timestamp)
		{
			var d = new Date(timestamp);
			var day = d.getDate();
			var month = d.getMonth();
			var year = d.getFullYear();
			var hour = d.getHours();
			var mins = d.getMinutes();
			var secs = d.getSeconds();
			var msec = d.getMilliseconds();
			return day + "." + month + "." + year + " " + hour + ":" + mins + ":" + secs + "." + msec;
		}
		
		/*function showLocation()
		{
			if(navigator.geolocation)
			{
				navigation.geolocation.getCurrentPosition(showPosition);
			}
			else
			{
				alert('Your browser does not support fucking geolocation');
			}
		}
		
		function showPosition(position)
		{
			alert("Latitude: " + position.coords.latitude + " Longitude: " + 
		        position.coords.longitude)
		}
	</script>
	
<!--
<script src = "jquery.js"></script>
<script src = "http://maps.google.com/maps/api/js?sensor=true"></script>
	
<script src = "jquery.js">

	x = navigator.geolocation;
	x.getCurrentPosition(success, failure);
	
	function success(position)
	{
		var myLat = position.coords.latitude;
		var myLong = position.coords.longitude;
		var coords = new google.maps.LatLng(myLat, myLong);
		var mapOptions = { zoom: 16, center: coords, mapTypeId: google.maps.MapTypeId.ROADMAP }
		var map = new google.maps.Map(document.getElementById("map"), mapOptions);
		var marker = new google.maps.Marker( {map: map, position: coords} );
	}
	
	function failure()
	{
		$('#lat').html("<p>Didn't work. Co-ordinates are available.</p>");
	}
	
</script>
	
<style>
	#map 
	{ 
		width: 400px;
		height: 400px;
	}
</style>
	
<div id = "map">

</div>
	
<div id = "lat"></div>
<div id = "long"></div>

-->

</html>
</head>
